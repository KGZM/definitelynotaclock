(function(){var a,b,c;window.actx=new window.AudioContext,window.trackSetup=function(){var a,c,d,e,f,g;return c=actx.createBiquadFilter(),f=actx.createOscillator(),g=actx.createOscillator(),d=actx.createGain(),a=actx.createDelay(),c.connect(d),c.frequency.value=200,c.Q.value=1,c.type="lowpass",d.connect(a),a.delayTime.value=1,a.connect(actx.destination),d.connect(actx.destination),f.type="sawtooth",g.type="sawtooth",f.connect(c),g.connect(c),d.gain.value=0,f.start(),g.start(),e=function(a,c){var d,e;return d=b(a),e=actx.currentTime,this.gain.gain.cancelScheduledValues(e),this.gain.gain.setValueAtTime(this.gain.gain.value,e),this.osc.frequency.setValueAtTime(this.osc.frequency.value,e),this.osc2.frequency.setValueAtTime(this.osc2.frequency.value,e),this.osc.frequency.setValueAtTime(d,e+.25),this.osc2.frequency.setValueAtTime(2*d+2,e+.125),this.filter.frequency.setValueAtTime(this.filter.frequency.value,e),this.filter.frequency.linearRampToValueAtTime(300+4*actx.currentTime%4*200,e+.1),this.gain.gain.exponentialRampToValueAtTime(.2,e+.01),this.gain.gain.exponentialRampToValueAtTime(.01,e+c)},{osc:f,osc2:g,gain:d,filter:c,noteOn:e}},a=[16.35,17.32,18.35,19.45,20.6,21.83,23.12,24.5,25.96,27.5,29.14,30.87,32.7,34.65,36.71,38.89,41.2,43.65,46.25,49,51.91,55,58.27,61.74,65.41,69.3,73.42,77.78,82.41,87.31,92.5,98,103.83,110,116.54,123.47,130.81,138.59,146.83,155.56,164.81,174.61,185,196,207.65,220,233.08,246.94,261.63,277.18,293.66,311.13,329.63,349.23,369.99,392,415.3,440,466.16,493.88,523.25,554.37,587.33,622.25,659.25,698.46,739.99,783.99,830.61,880,932.33,987.77,1046.5,1108.73,1174.66,1244.51,1318.51,1396.91,1479.98,1567.98,1661.22,1760,1864.66,1975.53,2093,2217.46,2349.32,2489.02,2637.02,2793.83,2959.96,3135.96,3322.44,3520,3729.31,3951.07,4186.01,4434.92,4698.63,4978.03,5274.04,5587.65,5919.91,6271.93,6644.88,7040,7458.62,7902.13],b=function(b){return a[b]},c=void 0,window.createScheduler=function(){var a,b,d,e;return c=trackSetup(),b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=240,$(document).keydown(function(a){var b;return b=String.fromCharCode(a.keyCode),d.writingnote=function(){switch(b){case"A":return 0;case"W":return 1;case"S":return 2;case"E":return 3;case"D":return 4;case"F":return 5;case"T":return 6;case"G":return 7;case"Y":return 8;case"H":return 9;case"U":return 10;case"J":return 11;case"K":return 12;default:return 0}}(),d.writing=!0,d.writingkey=b}),$(document).keyup(function(a){var b;return b=String.fromCharCode(a.keyCode),b===d.writingkey?d.writing=!1:void 0}),e=function(){var b,d=this;if(this.running)return this.writing&&(this.noteSequence[this.index]=this.writingnote),actx.currentTime>this.nextEvent&&(this.lastEvent=actx.currentTime,b=24+this.index%2*12,c.noteOn(b+this.noteSequence[this.index],1),this.nextEvent=actx.currentTime+60/a,this.index=(this.index+1)%this.noteSequence.length),setTimeout(function(){return d.tick()},16)},d={lastEvent:actx.currentTime,nextEvent:actx.currentTime,index:0,track:c,bpm:a,noteSequence:b,tick:e,run:function(){return this.running=!0,this.tick()},stop:function(){return this.running=!1},running:!0}},window.setupVisual=function(){var a,b,c,d;return a=$("<canvas>")[0],$("body").append(a),a.height=a.width=200,a.style.imageRendering="pixelated",b=a.getContext("2d",{antialias:!1,depth:!1}),$(a).css({}),$("html, body").css({backgroundColor:"black",padding:0,margin:0}),c=function(a){return a%360*Math.PI/180},d=function(){var e,f,g,h,i,j,k,l,m,n,o;return n=performance.now(),b.fillStyle="rgba(0,0,0,0.0025)",b.fillRect(0,0,a.width,a.height),requestAnimationFrame(d),e=a.width/2,f=a.height/2,i=scheduler.track.gain.gain.value,h=(actx.currentTime-scheduler.lastEvent)/(scheduler.nextEvent-scheduler.lastEvent),b.beginPath(),b.arc(e,f,20*Math.abs(1-h),0,2*Math.PI,!0),b.closePath(),b.fillStyle="black",b.fill(),b.fillStyle="red",b.fill(),g=360/scheduler.noteSequence.length,m=g*scheduler.index,o=c(-90+m+g*h),b.beginPath(),b.moveTo(e,f),b.lineTo(e+200*Math.cos(o),e+200*Math.sin(o)),b.lineWidth=1,b.strokeStyle="rgba(0,0,0,0.5)",b.stroke(),b.closePath(),b.beginPath(),j=scheduler.noteSequence[scheduler.index]/12,l=25+40*j,k=l+50*i,b.moveTo(e+l*Math.cos(o),f+l*Math.sin(o)),b.lineTo(e+k*Math.cos(o),f+k*Math.sin(o)),b.lineWidth=5,b.strokeStyle="rgb(\n  "+Math.floor(100*actx.currentTime)%255+",\n  "+Math.floor(127*actx.currentTime)%255+",\n  "+Math.floor(203*actx.currentTime)%255+"\n)\n",b.stroke(),b.closePath()}},window.scheduler=createScheduler(),scheduler.run(),setupVisual()()}).call(this);